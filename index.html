<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
    <!-- Index View -->
    <div id="indexView" style="display: flex; justify-content: center;">
        <button onclick="showHeatmapView()" class="button">Session 1</button>
    </div>

    <!-- Heatmap View (hidden by default) -->
    <div id="heatmapView" style="display: none;">
        
        <span onclick="showIndexView()" class="return-home">Return Home</span>

        <div class="channel-buttons-container">
            <button id="prevChan" class="button">Previous Channel</button>
            <h1 id="channelDisplay" style="text-align:center;"></h1>
            <button id="nextChan" class="button">Next Channel</button>
        </div>
        
        
        <div id = "containers">

            <span id="yAxisLabel">Frequency  (Hz)</span>
            <div class="heatmap-wrapper">
                <div class="container" id="container1"></div>
                <div class="container" id="container2"></div>
                <div class="container" id="container3"></div>
                
            </div>
            <span id="colorbarLabel"></span>
        
        </div>

        <div class="container" id="container4"></div>


        <div id="controls">
            <button id = "excludeTrialButton">Exclude Trial from Channel</button>
            <label for="trialSlider">Trial: </label>
            <input type="range" id="trialSlider" min="1"  value="1">
            <span id="trialNumber">1</span>
            <button id="meanTrialsButton">Average Trials</button>
            <button id="ANOVAbutton">ANOVA</button>
            <span id="pValId", style = 'display:none'>pValue = </span>
            <input type="text" id= "pVal" value= "0.10" style="width: 75px; height: 24px; display: none;">
            <button id = 'allChansANOVA' style = 'display: none; margin-left : 100px'>All Channels</button>
            <span id="warning" style = 'display:none'>Warning! Runtime ~30mins</span>

        </div>
           

        <div class="group-button-container">
            <button class="groupButton">Target</button>
            <div id="excludedTrialsContainerTarget" class="excluded-trials-container"></div>

            <button class="groupButton">Distractor</button>
            <div id="excludedTrialsContainerDistractor" class="excluded-trials-container"></div>

            <button class="groupButton">Irrelevant</button>
            <div id="excludedTrialsContainerIrrelevant" class="excluded-trials-container"></div>

        </div>

        <h1 id= "loadingText", style= "text-align:center;">Loading...</h1>
    </div>
    
    <script src= "https://d3js.org/d3.v5.min.js"></script>
    <script src= "page.js"></script>
    <script src= "heatmap.js"></script>
    <script src= "colorbar.js"></script>
    <script src= "LFPchart.js"></script>


    <script>
        function showHeatmapView() {
            document.title = document.getElementById('channelDisplay').textContent;
            document.getElementById("loadingText").style.display = "none";  // Hide "Loading..."
            document.getElementById('indexView').style.display = 'none';
            document.getElementById('heatmapView').style.display = 'block';
        }
        
        function showIndexView() {
            document.title = 'Home Page';
            const indexView = document.getElementById('indexView');
            indexView.style.display = 'flex';
            indexView.style.justifyContent = 'center';
            indexView.style.alignItems = 'center';
            document.getElementById('heatmapView').style.display = 'none';
        }
    </script>
    
</body>